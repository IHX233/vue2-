{"version":3,"file":"vue.js","sources":["../../src/observe/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["class Observe{\n    constructor(value){\n        this.walk(value)\n    }\n    walk(data){\n        let keys = Object.keys(data)\n        keys.forEach(key=>{\n            defineReactive(data,key,data[key])\n        })\n    }\n}\nfunction defineReactive(data,key,value){\n    observe(value);//如果值为对象，继续监控\n    Object.defineProperty(data,key,{\n        get(){\n            console.log('get',data,key)\n            return value\n        },\n        set(newValue){\n            console.log(\"set\",data,key,newValue)\n            if(value === newValue) return\n            observe(newValue) //如果新值设置为对象，继续监控\n            value = newValue\n        }\n    })\n}\nexport function observe(data){\n    if(typeof data !== \"object\" || data == null){\n        return\n    }\n    return new Observe(data)\n}","import { observe } from \"./observe/index.js\"\n\nexport function initState(vm){\n    const opt = vm.$options\n    if(opt.props){\n        initProps(vm)\n    }\n    if(opt.data){\n        initData(vm)\n    }\n    if(opt.methods){\n        initMethods(vm)\n    }\n    if(opt.computed){\n        initComputed(vm)\n    }\n    if(opt.watch){\n        initWatch(vm)\n    }\n}\nfunction initProps(){\n    \n}\nfunction initData(vm){\n    let data = vm.$options.data\n    vm._data = data = typeof data == 'function'?data.call(vm):data\n    observe(data)\n}\nfunction initMethods(){\n\n}\nfunction initComputed(){\n\n}\nfunction initWatch(){\n\n}","import {initState} from './state'\nexport function initMixin(Vue){\n    Vue.prototype._init = function(options){\n        const vm = this\n        vm.$options = options\n        //初始化状态（将数据做一个初始化劫持，当改变数据时更新视图）\n        initState(vm)\n    }\n}","import { initMixin } from \"./init\";\nexport default function Vue(options){\n    this._init(options)\n}\ninitMixin(Vue)"],"names":["Observe","value","_classCallCheck","walk","_createClass","key","data","keys","Object","forEach","defineReactive","observe","defineProperty","get","console","log","set","newValue","_typeof","initState","vm","opt","$options","props","initData","methods","computed","watch","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}