{"version":3,"file":"vue.js","sources":["../../src/observe/dep.js","../../src/util.js","../../src/observe/array.js","../../src/observe/index.js","../../src/observe/watcher.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/global-api/extend.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["let id = 0\nclass Dep{\n    constructor(){\n        this.subs = []\n        this.id = id++\n    }\n    depend(){\n        //dep存放watch，watch也存放dep\n        Dep.target.addDep(this)\n    }\n    addSub(watcher){\n        this.subs.push(watcher)\n    }\n    notify(){\n        this.subs.forEach(watcher=>watcher.update())\n    }\n}\nDep.target = null\nlet stack = []\nexport function pushTarget(watcher){\n    Dep.target = watcher\n    stack.push(watcher)\n}\nexport function popTarget(){\n    stack.pop()\n    Dep.target = stack[stack.length - 1]\n}\nexport default Dep\n//多对多的关系，一个属性有一个dep来收集watcher\n//dep可以存多个watch\n//一个watch可以对应多个dep","export function proxy(vm,data,key){\n    Object.defineProperty(vm,key,{\n        get(){\n            return vm[data][key]\n        },\n        set(newValue){\n            vm[data][key] = newValue\n        }\n    }) \n}\nexport function defineProperty(target,key,value){\n    Object.defineProperty(target,key,{\n        enumerable:false, //不能被枚举\n        configurable:false,\n        value\n    })\n}\nexport const LIFECYCLE_HOOKS = [\n    'beforeCreate',\n    'created',\n    'beforeMount',\n    'mounted',\n    'beforeUpdate',\n    'updated',\n    'beforeDestroy',\n    'destroyed '\n]\nconst strats = {}\nstrats.components = function(parentVal,childVal){\n    const res = Object.create(parentVal) //res._proto_ = parentVal\n    if(childVal){\n        for(let key in childVal){\n            res[key] = childVal[key]\n        }\n    }\n    return res\n\n}\n// strats.data = function(parentVal,childVal){\n//     return childVal\n// }\n// strats.computed = function(){\n    \n// }\n// strats.watch = function(){\n    \n// }\nfunction mergeHook(parentVal,childValue){\n    if(childValue){\n        if(parentVal){\n            return parentVal.concat(childValue)//父亲和儿子拼接\n        }else{\n            return [childValue] //儿子转换为数组\n        }\n    }else{\n        return parentVal //不合并，用父亲的\n    }\n}\nLIFECYCLE_HOOKS.forEach(hook=>{\n    strats[hook] = mergeHook\n})   \n \nexport function mergeOptions(parent,child){\n    const options = {}\n    //遍历父亲\n    for(let key in parent){//父亲和儿子都有的在这处理\n        mergeField(key)\n    }\n    //儿子有父亲没有的在这处理\n    for(let key in child){//将儿子多的赋予到父亲上\n        if(!parent.hasOwnProperty(key)){\n            mergeField(key)\n        }\n\n    }\n    function mergeField(key){//合并字段\n        \n        if(strats[key]){\n            options[key] = strats[key](parent[key],child[key])\n        }else{\n            if(child[key]){\n                options[key] = child[key]\n            }else{\n                options[key] = parent[key]\n            }\n            \n        }\n    }\n    return options\n}\nlet callbacks = []\nlet pending = false\nfunction flushCallbacks(){\n    while(callbacks.length){\n        let cb = callbacks.pop()\n        cb()\n    }\n    // callbacks.forEach(cb=>cb())\n    // callbacks = []\n    pending = false\n}\nlet timerFunc\n//兼容处理\nif(Promise){\n    timerFunc = () => {\n        Promise.resolve().then(flushCallbacks)\n    }\n}else if(MutationObserver){//可以监控dom变化，监控完毕异步更新\n    let observe = new MutationObserver(flushCallbacks)\n    let textNode = document.createTextNode(1)\n    observe.observe(textNode,{characterData:true})\n    timerFunc = ()=>{\n        textNode.textContent = 2\n    }\n}else if(setImmediate){\n    timerFunc = ()=>{\n        setImmediate(flushCallbacks)\n    }\n}else{\n    timerFunc = ()=>{\n        setTimeout(flushCallbacks)\n    }\n}\nexport function nextTick(cb){\n    callbacks.push(cb)\n    if(!pending){ \n        timerFunc()//这个是异步方法，做了兼容处理\n        pending = true\n    }\n    \n}\nfunction makeMap(){\n    const mapping = {}\n    const list = str.split(\",\")\n    for(let i = 0;i<list.length;i++){\n        mapping[list[i]] = true\n    }\n    return (key)=>{\n        return mapping[key]\n    }\n}\n\nexport const isReservedTag = makeMap(\n    'a,div,img,image,text,span,p,button,input,textarea,ul,li'\n)","let oldArrayProtoMethods = Array.prototype\nexport let arrayMethods = Object.create(oldArrayProtoMethods)\nlet methods = ['push','pop','shift','unshift','reverse','sort','splice']\nmethods.forEach(method => {\n    arrayMethods[method] = function(...args){\n        //当调用数组劫持的七个方法时触发更新\n        const result = oldArrayProtoMethods[method].apply(this,args)\n        let inserted;\n        let ob = this._ob_\n        switch(method){\n            case 'push':\n            case 'unshift'://两个都是增加，内容 可能是对象，需要劫持\n                inserted = args\n                break;\n            case 'splice'://$set原理\n                inserted = args.slice(2)\n            default:\n                break;\n        }\n        if(inserted){\n            ob.observeArray(inserted)\n        }\n        ob.dep.notify()//通知数组更新\n        return result\n    }\n})","import { defineProperty } from \"../util\"\nimport { arrayMethods } from \"./array\"\nimport Dep from \"./dep\"\nclass Observe{\n    constructor(value){\n        this.dep = new Dep()//为了把dep放ob属性上，这样数组方法触发时才能用到dep的更新方法\n        //判断一个属性是否是被观测过，看它有没有_ob_属性\n        defineProperty(value,'_ob_',this)\n        if(Array.isArray(value)){\n            value.__proto__ = arrayMethods\n            this.observeArray(value)//数组中普通类型是不做观测的\n        }else{\n            this.walk(value)\n        }\n        \n    }\n    observeArray(value){\n        value.forEach(item=>{\n            observe(item)\n        })\n    }\n    walk(data){\n        let keys = Object.keys(data)\n        keys.forEach(key=>{\n            defineReactive(data,key,data[key])\n        })\n    }\n}\nfunction defineReactive(data,key,value){\n    //获取数组对应的dep\n    let childDep = observe(value);//如果值为对象，继续监控\n    let dep = new Dep()\n    Object.defineProperty(data,key,{\n        get(){//依赖收集\n            if(Dep.target){//让这个属性记住这个watcher\n                dep.depend()\n                if(typeof childDep == \"object\"){//可能是数组，也可能是对象\n                    childDep.dep.depend()//这样才能收集数组的watch并在调用数组方法时触发更新\n                }\n            }\n            return value\n        },\n        set(newValue){//依赖更新\n            if(value === newValue) return\n            observe(newValue) //如果新值设置为对象，继续监控\n            value = newValue\n            dep.notify()\n        }\n    })\n}\nexport function observe(data){\n    if(typeof data !== \"object\" || data == null){\n        return\n    }\n    if(data._ob_){\n        return data\n    }\n    return new Observe(data)\n}","import {pushTarget,popTarget} from './dep'\nimport {nextTick} from \"../util\"\nimport { watch } from 'rollup'\nlet id = 0\nclass Watcher{\n    constructor(vm,exprOrFn,cb,options={}){\n        this.vm = vm\n        this.exprOrFn = exprOrFn\n        this.cb = cb\n        this.options = options\n        this.user = options.user//用户watcher标识\n        this.isWatcher = typeof options === \"boolean\"//是渲染watch\n        this.lazy = options.lazy //如果watcher上有lazy属性，就是一个计算属性\n        this.dirty = this.lazy //ditty代表取值时是否执行用户的方法\n        this.id = id++ //watcher的唯一标识\n        this.deps = [] //watcher记录有多少dep依赖它\n        this.depsid = new Set()\n        if(typeof exprOrFn == \"function\"){\n            this.getter = exprOrFn\n        }else{\n            this.getter = function(){\n                let path = exprOrFn.split('.')\n                let obj = vm\n                for(let i=0;i<path.length;i++){\n                    obj = obj[path[i]]\n                }\n                return obj \n            }\n        }\n        this.value = this.lazy? 0 :this.get()\n    }\n    addDep(dep){\n        let id = dep.id\n        if(!this.depsid.has(id)){\n            this.deps.push(dep)\n            this.depsid.add(id)\n            dep.addSub(this)\n        }\n    }\n    get(){\n        //组件挂载的时候会调用一次get，此时getter是渲染页面，会触发definedProperty的get方法收集watcher依赖，所以要在这之前pushTarget然后再popTarget\n        pushTarget(this)//当前watcher实例\n        let result = this.getter.call(this.vm)\n        popTarget()\n        return result\n    }\n    run(){\n        //用户watcher时取新老值\n        let newValue = this.get()\n        let oldValue = this.value\n        this.value = newValue\n        if(this.user){\n            this.cb.call(this.vm,newValue,oldValue)\n        }\n    }\n    update(){\n        // this.get()//重新渲染\n        if(this.lazy){//计算属性watcher不用更新页面\n            this.dirty = true //页面重新渲染就能获取最新的值 \n        }else{\n            queueWatcher(this)\n        }\n        \n    }\n    evaluate(){\n        this.value = this.get()\n        this.dirty = false \n    }\n    depend(){\n        let i = this.deps.length\n        while(i--){\n            this.deps[i].depend()\n        }\n    }\n}\nlet queue = []//将需要批处理更新的watcher存到一个队列中，稍后让watcher执行\nlet has = {}\nlet pending = false\nfunction flushSchedulerQueue(){\n    queue.forEach(watcher => {watcher.run();\n        if(watcher.isWatcher){\n            watcher.cb()\n        }\n        \n    })\n    queue = []\n    has = {}\n    pending = false\n}\nfunction queueWatcher(watcher){\n    const id = watcher.id\n    if(has[id] == null){\n        queue.push(watcher)\n        has[id] = true\n        if(!pending){\n            nextTick(flushSchedulerQueue)\n            pending = true\n        }\n    }\n}\nexport default Watcher","import Dep from \"./observe/dep.js\"\nimport { observe } from \"./observe/index.js\"\nimport Watcher from \"./observe/watcher.js\"\nimport {proxy,nextTick} from \"./util.js\"\n\nexport function initState(vm){\n    const opt = vm.$options\n    if(opt.props){\n        initProps(vm)\n    }\n    if(opt.data){\n        initData(vm)\n    }\n    if(opt.methods){\n        initMethods(vm)\n    }\n    if(opt.computed){\n        initComputed(vm)\n    }\n    if(opt.watch){\n        initWatch(vm)\n    }\n}\nfunction initProps(){\n    \n}\n\nfunction initData(vm){\n    let data = vm.$options.data\n    vm._data = data = typeof data == 'function'?data.call(vm):data\n    for(let key in data){\n        proxy(vm,'_data',key)\n    }\n    observe(data)//让对象重新定义set、get方法\n}\nfunction initMethods(){\n\n}\nfunction initComputed(vm){\n    //需要有watcher 还需要通过defineProperty dirty\n    let computed = vm.$options.computed\n    let watchers = vm._computedWatchers = {}\n    for(let key in computed){\n        const userDef = computed[key]\n        const getter = typeof userDef == \"function\"?userDef:userDef.get\n        watchers[key] = new Watcher(vm,getter,()=>{},{lazy:true})\n        defineComputed(vm,key,userDef)\n\n    }\n}\n\nfunction defineComputed(target,key,userDef){\n    let sharedPropertyDefiniton = {\n        enumerable:true,\n        configurable:true,\n        get:()=>{},\n        set:()=>{}\n    }\n    if(typeof userDef == \"function\"){\n        sharedPropertyDefiniton.get = createComputedGetter(key)\n    }else{\n        sharedPropertyDefiniton.get = createComputedGetter(key)\n        sharedPropertyDefiniton.set = userDef.set \n    }\n    Object.defineProperty(target,key,sharedPropertyDefiniton)\n}\nfunction createComputedGetter(key){\n    return function(){\n        const watcher = this._computedWatchers[key]\n        if(watcher){\n            if(watcher.dirty){\n                watcher.evaluate()\n            }\n            if(Dep.target){//说明还有渲染watcher，应该一起收集起来\n                watcher.depend()//计算属性watcher\n            }\n\n            return watcher.value\n        }\n        \n    }\n}\nfunction initWatch(vm){\n    let watch = vm.$options.watch\n    for(let key in watch){\n        const handler = watch[key]\n        if(Array.isArray(handler)){//数组\n            handler.forEach(handle=>{\n                createWatcher(vm,key,handle)\n            })\n        }else{//字符串、对象、函数\n            createWatcher(vm,key,handler)\n        }\n    }\n    \n}\nfunction createWatcher(vm,exprOrFn,handler,options={}){//options可以用来标识是用户watcher\n    if(typeof handler == \"object\"){\n        options = handler\n        handler = handler.handler\n    }\n    if(typeof handler == \"string\"){\n        handler = vm[handler]\n    }\n    return vm.$watch(exprOrFn,handler,options)\n}\nexport function stateMixin(Vue){\n    Vue.prototype.$nextTick = function(cb){\n        nextTick(cb)\n    }\n    Vue.prototype.$watch = function(exprOrFn,cb,options){\n        let watcher =  new Watcher(this,exprOrFn,cb,{...options,user:true})\n        if(options.immediate){\n            cb()\n        }\n    }\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) //标签开头的正则，捕获的是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`) //匹配标签结尾\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>']+)))?/ //匹配属性\nconst startTagClose = /^\\s*(\\/?)>/  //匹配标签结束\n\nexport function parseHtml(html){\n    function creatASTElement(tagName,attrs){\n        return {\n            tag:tagName,\n            type:1,\n            children:[],\n            attrs,\n            parent:null\n        }\n    }\n    //被解析的根元素\n    let root\n    //当前在被解析的元素\n    let currentParent\n    //用于对比标签是否符合规范，即有开始标签也有结束标签\n    let stack = []\n    function start(tagName,attrs){\n        let element = creatASTElement(tagName,attrs)\n        if(!root){\n            root = element\n        }\n        currentParent = element\n        stack.push(element)//将生成的ast元素放到栈中\n    }\n    function end(){\n        let element = stack.pop();//取出栈里最后一个，即该标签解析结束\n        currentParent = stack[stack.length-1] //更新当前解析的标签\n        if(currentParent){//当一个标签解析完成，就可以知道其父标签  \n            element.parent = currentParent\n            currentParent.children.push(element)\n        }\n    \n    }\n    function chars(text){\n        \n        text = text.replace(/\\s/g,'')//去掉空格\n        if(text){\n            currentParent.children.push({\n                 type:3,\n                 text\n            })\n        }\n        \n    }\n    while(html){\n        let textEnd = html.indexOf('<')\n        if(textEnd == 0){//是标签的开始标记\n            const startTagMatch = parseStartTag()\n            if(startTagMatch){ \n                start(startTagMatch.tagName,startTagMatch.attrs )\n                continue\n            }\n            const endTagMatch = html.match(endTag)\n            if(endTagMatch){\n                advance(endTagMatch[0].length)\n                end(endTagMatch[1])\n                continue\n            }\n        }\n        let text\n        if(textEnd>0){//是文本\n            text = html.substring(0,textEnd)\n        }\n        if(text){\n            advance(text.length)\n            chars(text)\n        }\n    }\n    return root \n    function advance(n){//截取更新html\n        html = html.substring(n)\n    }\n    //创建当前被解析html标签的ast语法结构\n    function parseStartTag(){\n        const start = html.match(startTagOpen)\n        if(start){\n            const match = {\n                tagName:start[1],\n                attrs:[]\n            }\n            advance(start[0].length)//删除开始标签\n            //不是标签结束标记且有属性\n            let end;\n            let attr;\n            while(!(end=html.match(startTagClose))&&(attr=html.match(attribute))){\n                match.attrs.push({name:attr[1],value:attr[3]||attr[4]||attr[5]})\n                advance(attr[0].length) \n            }\n            if(end){//匹配到标签结束标记，删除标签并结束一轮的开始标签信息解析\n                advance(end[0].length)\n                return match;\n                \n            }\n        }\n    }\n}","const defaultTagRe = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g //匹配双大括号和里面的内容\nfunction genProps(attrs){\n    let str = ''\n    for(let i = 0;i<attrs.length;i++){\n        let attr = attrs[i]\n        if(attr.name === 'style'){//对样式的特殊处理\n            let obj = {};\n            attr.value.split(';').forEach(item => {\n                let [key,value] = item.split(':')\n                obj[key] = value\n            })\n            attr.value = obj\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\n    }\n    return `{${str.slice(0,-1)}}`\n}\nfunction gen(node){\n    if(node.type == 1){\n        return generate(node)//生成元素节点的字符串\n    }else{\n        let text = node.text;//获取文本\n        //_v('hello{{world}}') => _v('hello'+_s(world))\n        if(!defaultTagRe.test(text)){\n            //如果是普通文本，不带{{}}\n            return `_v(${JSON.stringify(text)})`\n        }\n        let tokens = []\n        let lastIndex = defaultTagRe.lastIndex = 0 //如果正则是全局模式，需要每次使用前设置为0\n        let match,index\n        while(match = defaultTagRe.exec(text)){\n            index = match.index//保存匹配到的索引\n            if(index > lastIndex){\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)))\n            }\n            tokens.push(`_s(${match[1].trim()})`)\n            lastIndex = index + match[0].length\n        }\n        if(lastIndex<text.length){\n            tokens.push(JSON.stringify(text.slice(lastIndex)));\n        }\n        return `_v(${tokens.join('+')})`\n    }\n}\nfunction genChildren(el){\n    const children = el.children\n    if(children){ //将转换后的儿子用逗号拼接起来\n        return children.map(child => gen(child)).join(',')\n    }\n}\nexport function generate(el){\n    let children = genChildren(el)//儿子的生成 \n    let code = `_c('${el.tag}',${\n        el.attrs?`${genProps(el.attrs)}`:'undefined'\n    }${\n        children?`,${children}`:''\n    })`\n    return code\n}","import {parseHtml} from './parse.js'\nimport { generate } from './generate.js'\nexport function compileToFunctions(template){\n    //1.将html转化为ast语法树\n    let ast = parseHtml(template)\n    //2.优化静态节点\n\n    //3.通过这棵树重新生成代码\n    let code = generate(ast)\n    //4.将字符串变成函数 限制取值范围 通过with进行取值 之后通过render函数就可以改变this 让这个函数内部取到结果\n    let render = new Function(`with(this){return ${code}}`)\n    return render\n}","export function patch(oldVnode,vnode){\n    if(oldVnode.nodeType == 1){//真实节点\n        //虚拟dom转换为真实dom\n        let el = createElm(vnode)//产生真实dom\n        let parentElm = oldVnode.parentNode\n        parentElm.insertBefore(el,oldVnode.nextSibling)//将新的节点插在老的节点前面\n        parentElm.removeChild(oldVnode)//删除老的节点\n        return el\n    }else{\n        //在更新的时候拿老的虚拟节点和新的虚拟节点做对比，将不同的地方更新\n        //1.比较两个元素的标签，标签不一样直接替换掉\n        if(oldVnode.tag !== vnode.tag){\n            return oldVnode.el.parentNode.replaceChild(createElm(vnode),oldVnode.el)\n        }\n        //2.标签一样，比对文本，文本节点的tag都是undefined\n        if(!oldVnode.tag){\n            if(oldVnode.text!==vnode.text){\n                // oldVnode.el.data = vnode.text\n                // oldVnode.el.nodeValue = vnode.text\n                // oldVnode.el.textContent = vnode.text\n                return oldVnode.el.textContent = vnode.text\n            }\n        }\n        //3.标签一样，并且需要开始比对标签的属性和儿子\n        //标签一样直接复用即可\n        let el = vnode.el = oldVnode.el\n        //更新属性，用新的虚拟节点的属性和老的比较，去更新节点\n        //新老属性对比\n        updateProperties(vnode,oldVnode.data)\n        let oldChildren = oldVnode.children || []\n        let newChildren = vnode.children || []\n        if(oldChildren.length>0&&newChildren.length>0){//新老都有孩子\n            updateChildren(oldChildren,newChildren,el)\n        }else if(oldChildren.length>0){//新的没有\n            el.innerHTML = ''\n        }else if(newChildren.length>0){//老的没有\n            for(let i=0;i<newChildren.length;i++){\n                let child = newChildren[i]\n                el.appendChild(createElm(child))\n            }\n            \n        }\n    }\n    \n}\nfunction isSameVnode(oldVnode,newVnode){\n    return (oldVnode.tag == newVnode.tag)&&(oldVnode.key == newVnode.key)\n}\nfunction makeInedexByKey(children){\n    let map = {}\n    children.forEach((item,index)=>{\n        if(item.key){ \n            map[item.key] = index\n        }\n    })\n    return map\n}\nfunction updateChildren(oldChildren,newChildren,parent){\n    let oldStartIndex = 0\n    let oldStartVnode = oldChildren[0]\n    let oldEndIndex = oldChildren.length - 1\n    let oldEndVnode = oldChildren[oldEndIndex]\n\n    let newStartIndex = 0\n    let newStartVnode = newChildren[0]\n    let newEndIndex = newChildren.length - 1\n    let newEndVnode = newChildren[newEndIndex]\n    let map = makeInedexByKey(oldChildren)\n    //做一个循环，同时循环老的和新的，哪个先结束，循环就停止，将多余的删除或添加进去\n    while(oldStartIndex<=oldEndIndex&&newStartIndex<=newEndIndex){\n        if(!oldStartVnode){//null\n            oldStartVnode = oldChildren[++oldStartIndex]\n        }\n        //头头比\n        else if(isSameVnode(oldStartVnode,newStartVnode)){//如果是同一个元素，比对儿子\n            patch(oldStartVnode,newStartVnode)//更新属性，递归更新儿子\n            oldStartVnode = oldChildren[++oldStartIndex]\n            newStartVnode = newChildren[++newStartIndex]\n            //尾尾比\n        }else if(isSameVnode(oldEndVnode,newEndVnode)){\n            patch(oldEndVnode,newEndVnode)\n            oldEndVnode = oldChildren[--oldEndIndex]\n            newEndVnode = newChildren[--newEndIndex]\n            //头尾比\n        }else if(isSameVnode(oldStartVnode,newEndVnode)){\n            patch(oldStartVnode,newEndVnode)\n            //将当前元素插到尾部的下一个元素前面\n            parent.insertBefore(oldStartVnode.el,oldEndVnode.el.nextSibling)\n            oldStartVnode = oldChildren[++oldStartIndex]\n            newEndVnode = newChildren[--newEndIndex]\n        }else if(isSameVnode(oldEndVnode,newStartVnode)){\n            patch(oldEndVnode,newStartVnode)\n            parent.insertBefore(oldEndVnode.el,oldStartVnode.el)\n            oldEndVnode = oldChildren[--oldEndIndex]\n            newStartVnode = newChildren[++newStartIndex]\n        }else{\n            //暴力对比\n            let moveIndex = map[newStartVnode.key]\n            if(moveIndex == undefined){\n                parent.insertBefore(createElm(newStartVnode),oldStartVnode.el)\n            }else{\n                let moveVNode = oldChildren[moveIndex]\n                oldChildren[moveIndex] = null\n                parent.insertBefore(moveVNode.el,oldStartVnode.el)\n                patch(moveVNode,newStartVnode)\n            }\n            newStartVnode = newChildren[++newStartIndex]\n            \n        }\n    }\n    if(newStartIndex<=newEndIndex){\n        for(let i = newStartIndex;i<=newEndIndex;i++){\n            //将新的多的插入\n            parent.appendChild(createElm(newChildren[i]))\n        }\n    }\n    if(oldStartIndex <= oldEndIndex){\n        for(let i =oldStartIndex;i<=oldEndIndex;i++){\n            let child = oldChildren[i]\n            if(child!=undefined){\n                parent.removeChild(child.el)\n            }\n        }\n    }\n}\nfunction createComponent(vnode){\n    //调用hook中的init方法\n    let i = vnode.data\n    if((i = i.hook)&&(i = i.init)){\n        i(vnode)\n    }\n    if(vnode.componentInstance){\n        return true;\n    }\n}\nexport function createElm(vnode){\n    let {tag,children,key,data,text} = vnode\n    if(typeof tag == \"string\"){\n        if(createComponent(vnode)){\n            return vnode.componentInstance.$el\n        }\n        vnode.el = document.createElement(tag)\n        updateProperties(vnode)\n        children.forEach(child=>{\n            vnode.el.appendChild(createElm(child))\n        })\n    }else{\n        vnode.el = document.createTextNode(text)\n    }\n    return vnode.el\n}\nfunction updateProperties(vnode,oldProps={}){\n    let newProps = vnode.data || {}\n    let el = vnode.el\n    //老的有新的没有需要删除属性\n    for(let key in oldProps){\n        if(!newProps[key]){\n            el.removeAttribute(key)\n        }\n    }\n\n    //样式处理  老的：style={color:red}   新的：style={background:red}\n    let newStyle = newProps.style || {}\n    let oldStyle = oldProps.style || {}\n    for(let key in oldStyle){\n        if(!newStyle[key]){\n            el.style[key] = \"\"\n        }\n    }\n\n    //新的有，直接用新的更新就行\n    for(let key in newProps){\n        if(key == \"style\"){\n            for(let styleName in newProps.style){\n                el.style[styleName] = newProps.style[styleName]\n            }\n        }else if(key == \"class\"){\n            el.className = newProps.class\n        }else{\n            el.setAttribute(key,newProps[key]) \n        }\n        \n    }\n    \n}","import {patch} from './vdom/patch'\nimport Watcher from './observe/watcher'\nexport function lifecycleMixin(Vue){\n    Vue.prototype._update = function(vnode){\n        const vm = this\n        const prevVnode = vm._vnode\n        //是否是首次渲染\n        if(!prevVnode){\n            //用新创建的元素，替换老的vm.$el\n            vm.$el = patch(vm.$el,vnode)\n            vm._vnode = vnode\n        }else{\n            vm.$el = patch(prevVnode,vnode)\n        }\n        \n    }\n}\nexport function mountComponent(vm,el){\n    callHook(vm,'beforeMount')\n    let updateComponent = () => {\n        vm._update(vm._render())\n    }\n    //初始化创建watcher\n    let watcher = new Watcher(vm,updateComponent,()=>{\n        callHook(vm,'updated')\n    },true)\n    // watcher.get()\n    callHook(vm,'mounted')\n}\nexport function callHook(vm,hook){\n    const handlers = vm.$options[hook]\n    if(handlers){\n        for(let i = 0;i<handlers.length;i++){\n            handlers[i].call(vm)\n        }\n    }\n}","import {initState} from './state'\nimport { compileToFunctions } from './compiler/index.js'\nimport {callHook, mountComponent} from './lifecycle'\nimport {mergeOptions} from './util'\nexport function initMixin(Vue){\n    Vue.prototype._init = function(options){\n        const vm = this\n        vm.$options = mergeOptions(vm.constructor.options,options)\n        callHook(vm,'beforeCreate')\n        //初始化状态（将数据做一个初始化劫持，当改变数据时更新视图）\n        initState(vm)\n        callHook(vm,'created')\n        if(vm.$options.el){\n            vm.$mount(vm.$options.el)\n        }\n    }\n    Vue.prototype.$mount = function(el){\n        //挂载操作\n        const vm = this\n        const options = vm.$options\n        el = document.querySelector(el)\n        vm.$el = el\n        if(!options.render){\n            //没有render，把template转换成render方法\n            let template = options.template\n            if(!template && el){\n                template = el.outerHTML\n            }\n            //将模编译成render函数\n            const render = compileToFunctions(template)\n            options.render = render\n        }\n        mountComponent(vm,el)\n    }\n}","import { isReservedTag } from \"../util\"\n\nexport function renderMixin(Vue){\n    Vue.prototype._c = function(){//创建虚拟dom元素\n        return createElement(this,...arguments)\n    }\n    Vue.prototype._s = function(val){//stringify\n        return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val\n    }\n    Vue.prototype._v = function(text){//创建虚拟dom文本元素\n        return createTextVnode(text)\n    }\n    \n    Vue.prototype._render = function(){//_render = render\n        const vm = this\n        const render = vm.$options.render\n        let vnode = render.call(vm)\n        return vnode \n    }\n}\nfunction createElement(vm,tag,data={},...children){\n    //如果是组件 产生虚拟节点时需要把组件的构造函数传入\n    if(isReservedTag(tag)){\n        return vnode(tag,data,data.key,children)\n    }else{\n        let Ctor = vm.$option.components[tag]\n        //创建组件的虚拟节点 children是插槽\n        return createComponent(vm,tag,data,data.key,children,Ctor)\n    }\n    \n}\nfunction createComponent(){\n    const baseCtor = vm.$options._base\n    if(typeof Ctor == \"object\"){\n        Ctor = baseCtor.extend(Ctor)\n    }\n    //给组件增加生命周期\n    data.hook = {\n        init(){\n\n        }\n    }\n    return vnode(`vue-component-${Ctor.cid}-${tag}`,data,data.key,undefined,undefined,{Ctor,children})\n}\nfunction createTextVnode(text){\n    return vnode(undefined,undefined,undefined,undefined,text)\n}\nfunction vnode(tag,data,key,children,text,componentOptions){\n    return {\n        tag,\n        data,\n        key,\n        children,\n        text,\n        componentOptions\n    }\n}","export default function initExtend(Vue){\n    let cid = 0;\n    Vue.extend = function(extendOptions){\n        const Super = this;\n        const Sub = function VueComponent(options){\n            this._init(options)\n        }\n        Sub.cid = cid++\n        //子类继承父类原型上的方法\n        Sub.prototype = Object.create(Super.prototype)\n        Sub.prototype.constructor = Sub\n        Sub.options = mergeOptions(\n            Super.options,\n            extendOptions\n        )\n        Sub.components = Super.components\n        return Sub\n    }\n}","import {mergeOptions} from '../util'\nimport initExtend from './extend'\nexport function initGlobalApi(Vue){\n    Vue.options = {};\n    Vue.mixin = function(mixin){\n        this.options = mergeOptions(this.options,mixin)\n    }\n    Vue.options._base = Vue //_base 最终的Vue的构造函数保留在options对象中\n    Vue.options.components = {}\n    initExtend(Vue)\n    Vue.component = function(id,definition){\n        definition.name = definition.name || id\n        definition = this.options._base.extend(definition)\n        Vue.options.components[id] = definition\n    }\n    \n} ","import { initMixin } from \"./init\";\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { renderMixin } from \"./vdom/index\";\nimport {initGlobalApi} from \"./global-api/index\"\nimport {stateMixin} from \"./state\"\nexport default function Vue(options){\n    this._init(options)\n}\n//对原型进行拓展 原型方法\ninitMixin(Vue) //init方法\nlifecycleMixin(Vue) //_update\nrenderMixin(Vue) //_render\nstateMixin(Vue)\n\n//静态方法\ninitGlobalApi(Vue)\n\n// import { compileToFunctions } from \"./compiler/index\";\n// import {createElm, patch} from \"./vdom/patch\"\n// let vm1 = new Vue({data:{name:'ihx'}})\n// let render1 = compileToFunctions(`<div>\n//     <li style=\"background:red\">A</li>\n//     <li style=\"background:pink\">B</li>\n//     <li style=\"background:yellow\">C</li>\n//     <li style=\"background:green\">D</li>\n// </div>`)\n// let vnode1 = render1.call(vm1)\n// document.body.appendChild(createElm(vnode1))\n// let vm2 = new Vue({data:{name:'gf'}})\n// let render2 = compileToFunctions(`<div>\n// <li style=\"background:purple\">A</li>\n// <li style=\"background:pink\">B</li>\n// <li style=\"background:yellow\">C</li>\n// <li style=\"background:green\">D</li>\n// <li style=\"background:blue\">E</li>\n// </div>`)\n// let vnode2 = render2.call(vm2)\n// setTimeout(()=>{\n//     patch(vnode1,vnode2)\n// },1000)\n"],"names":["id","Dep","_classCallCheck","subs","_createClass","key","value","depend","target","addDep","addSub","watcher","push","notify","forEach","update","stack","pushTarget","popTarget","pop","length","proxy","vm","data","Object","defineProperty","get","set","newValue","enumerable","configurable","LIFECYCLE_HOOKS","strats","components","parentVal","childVal","res","create","mergeHook","childValue","concat","hook","mergeOptions","parent","child","options","mergeField","hasOwnProperty","callbacks","pending","flushCallbacks","cb","timerFunc","Promise","resolve","then","MutationObserver","observe","textNode","document","createTextNode","characterData","textContent","setImmediate","setTimeout","nextTick","makeMap","mapping","list","str","split","i","isReservedTag","oldArrayProtoMethods","Array","prototype","arrayMethods","methods","method","_len","arguments","args","_key","result","apply","inserted","ob","_ob_","slice","observeArray","dep","Observe","isArray","__proto__","walk","item","keys","defineReactive","childDep","_typeof","Watcher","exprOrFn","undefined","user","isWatcher","lazy","dirty","deps","depsid","Set","getter","path","obj","has","add","call","run","oldValue","queueWatcher","evaluate","queue","flushSchedulerQueue","initState","opt","$options","props","initData","computed","initComputed","watch","initWatch","_data","watchers","_computedWatchers","userDef","defineComputed","sharedPropertyDefiniton","createComputedGetter","_loop","handler","handle","createWatcher","$watch","stateMixin","Vue","$nextTick","_objectSpread","immediate","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHtml","html","creatASTElement","tagName","attrs","tag","type","children","root","currentParent","start","element","end","chars","text","replace","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRe","genProps","_item$split","_item$split2","_slicedToArray","JSON","stringify","gen","node","generate","test","tokens","lastIndex","index","exec","trim","join","genChildren","el","map","code","compileToFunctions","template","ast","render","Function","patch","oldVnode","vnode","nodeType","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","replaceChild","updateProperties","oldChildren","newChildren","updateChildren","innerHTML","appendChild","isSameVnode","newVnode","makeInedexByKey","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","moveIndex","moveVNode","createComponent","init","componentInstance","$el","createElement","oldProps","newProps","removeAttribute","newStyle","style","oldStyle","styleName","className","setAttribute","lifecycleMixin","_update","prevVnode","_vnode","mountComponent","callHook","updateComponent","_render","handlers","initMixin","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","_s","val","_v","createTextVnode","$option","baseCtor","_base","Ctor","extend","cid","componentOptions","initExtend","extendOptions","Super","Sub","VueComponent","initGlobalApi","mixin","component","definition"],"mappings":"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"}